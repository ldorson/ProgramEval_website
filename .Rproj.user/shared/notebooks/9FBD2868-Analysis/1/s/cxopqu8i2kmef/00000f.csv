"0","set.seed(4660)"
"0",""
"0","# simulate 100000 students"
"0","n_students <- 100000"
"0",""
"0",""
"0","# state B represents Georgia (treatment state) while state B represents control state"
"0","did_data <- tibble("
"0","  id = 1:n_students,"
"0","  year = round(runif(n_students, min = 1988, max = 1997), 0),"
"0","  state = sample(c(""state A"", ""state B""), n_students, replace = TRUE)"
"0",") %>%"
"0","  mutate(hope = ifelse(state == ""state B"" & year > 1992, TRUE, FALSE)) %>%"
"0","  mutate(grad_base = rbeta(n_students, shape1 = 6, shape2 = 3) * 100,"
"0","         state_effect = ifelse(state == ""state B"", rnorm(n_students, mean = 4, sd = 2), 0),"
"0","         year_smaller = year - 1987,"
"0","         year_effect = rnorm(n_students, mean = -3, sd = 0.2) * year_smaller,"
"0","         hope_effect = ifelse(state == ""state B"" & year > 1992,"
"0","                             rnorm(n_students, mean = -8, sd = 2),"
"0","                             0),"
"0","         grad = grad_base + state_effect + year_effect + hope_effect,"
"0","         grad = rescale(grad, to = c(0, 100))) %>%"
"0","  mutate(after = year > 1992)"
"0",""
"0","head(did_data)"
